<!--
https://ae01.alicdn.com/kf/H7a277312d55843d1b963746d6ddde10cC.png
框架设计
分布式系统学习(一)
分布式系统，如何再其中定位自身的角色，需要从全局的角度来看各个子系统，确保各自的独立性
分布式系统，如何再其中定位自身的角色，需要从全局的角度来看各个子系统，确保各自的独立性
-->

## 分布式系统学习(一)

> 分布式系统，如何再其中定位自身的角色，需要从全局的角度来看各个子系统，确保各自的独立性

![常规系统](https://ae01.alicdn.com/kf/H0fed12037b4142a7bbae092d68241512i.png)
常规的一个大系统，内部由多个模块组成，一次完整的请求，需要内部各个模块协调完成。

![简单分布式系统](https://ae01.alicdn.com/kf/Hac23ad3fe63b4e75ae5eda76150020e6x.png)
简单的分布式系统，即将原本的大系统，内部各个模块，独立出来单独部署成各个子系统。  
一次完整的请求，需要各个系统协调完成，形成一个大系统的整体。

为什么要拆分系统，因为当代码量适当，且模块数量不多的时候，还好。一旦这些量上去了，
那么代码的维护难度会几何上涨。如一个十万行的代码，包含20个功能模块，一旦其中某一个模块做出修改，
就或多或少的可能影响其他模块，导致其他模块的负责人需要重新测试功能的完整新于可用性。  

当拆离做分布式系统后，各个模块相对独立，可以拥有自己的技术服务，版本服务等，只需要保证接口不变，
接口参数等交互规则不变，则互不影响。故分布式系统的搭建非常由意义。

以自己写的爬分布式爬虫调度服务为例：  
1、没有写分布式以前，只有调度模块的和爬虫模块两个部分，其中爬虫模块是异步执行的，即需要开启一个进程来执行爬虫。  
2、然后任务增加，需要增加爬虫并行能力，需要引入分布式。改为通过rpc消息通道，实现调度服务与子节点之间的通信。
3、由于爬虫的特殊性，有时需要增加额外的参数，而且需要管理爬虫进程，纯粹的rpc接口服务导致所有模块耦合严重。
4、引入消息队列，此处次采用RabbitMQ，整体拆分为：调度模块、数据模块、爬虫管控模块、爬虫模块 四个模块。
5、调度模块将任务推到消息队列，爬虫管控模块监控此队列，内部配置有爬虫的启动规则，方便后期修改爬虫配置。
数据模块就是我写的数据分析的小模块，包括房价预测、新闻分类等简单的demo。虽然采用了消息队列拆分服务，
但是我还是保留了rpc通过，一遍实时的管控每个子节点，比如杀进程等服务。就是还是保留了接口服务。不过接口服务功能单一而已。
6、rpc可以理解为面向接口的服务调用。阿里的dubbo则是基于RPC实现的，再纯接口模型上，增加了注册、订阅、监控等功能。


<!--


-->
